## 2.0.1.上传产品包
自6.0版本开始，Transwarp Manager作为一个单独的产品安装，各产品线的产品需要在Transwarp Manager的应用市场里先上传产品包，而后Transwarp Manager会自动完成解压，取代了之前版本的手动解压步骤，使安装服务更加便捷，并且更加灵活，例如，您可以上传不同版本的产品包，来安装不同版本的服务。

1. 从Manager左侧导航栏点击 **应用市场** 栏目下的**产品包**。 ![[01.产品包.png]]
2. 在产品包页面，点击 **上传** 按键![[02.上传.png]]
3. 在以下弹出窗口中选择产品包的位置（可同时上传多个软件包）：![[03.选择产品包位置.png]]
4. 上传需要一段时间，完成后可以看到状态图标。您也可以点击产品包右侧的**查看详情**来查看上传进程。![[04.查看上传进程.png]]![[05.查看上传进程详情.png]]
5. 等待上传成功后，相应的服务将会出现在安装服务时的选择服务页面。![[06.等待上传成功.png]]
## 2.0.2.选择服务
在安装服务之前请再次确认已按照安装前的检查的要求分配资源，并已成功上传产品包。
1. 在Manager左侧导航栏点击**仪表盘**下的**集群**，然后点击**添加服务**![[07.添加服务.png]]
2. 输入关键字**Leopard**，点击需要安装的版本![[08.输入Leopard.png]]
3. 添加服务：**Leopard**、**Quark**、**TimeChord**、**TimeLyreStorage**，如果您上传了多个版本的产品包，您可以点击选择要安装的版本![[09.添加4个服务.png]]
4. 如果您已经安装了**Quark**、**TimeChord**、**TimeLyreStorage**，只需要添加服务：**Leopard**![[10.添加Leopard服务.png]]
6. 点击下一步安装所选择的服务
## 2.0.3.配置安全
您可以在这一步进行安全配置。如果您当前还没有安装Guardian，您可以选择简单认证模式。如果您安装了Guardian，您可以在这一步选择Kerberos认证模式，并输入KAdmin票据名和密码开启Guardian插件。
![[11.配置安全.png]]
![[12.Kadmin认证.png]]
## 2.0.4.服务角色的分配
选择想要安装的服务之后，接下来分配各项服务的角色。各服务角色都对应若干个勾选框，每个勾选框代表集群中的一个节点。分配角色的方法为勾选或取消勾选服务右侧对应的节点，被选中的节点将承担该服务角色。例如下图中，四个勾选框被选中代表集群中的这四个节点将承担Leopard Worker角色。![[13.服务角色的分配.png]]
### 2.0.4.1.角色默认分配
Transwarp Manager对服务的角色提供默认分配，如果您想要使用默认的分配，可以点击“下一步”直接进行配置。但是我们推荐您根据实际的生产场景进行规划，同时我们推荐遵守下面的一些分配原则：
- **推荐** 将TDDMS Master角色分配给 **奇数** 个节点，建议集群大小在20个节点以下配置3个，20个节点以上配置5-7个，不超过7个。
- **推荐** 给集群每一个节点分配Leopard Worker角色。
- **推荐** 给集群每一个节点分配Nucleon Executor角色。
### 2.0.4.2.角色属性配置
![[14.角色属性配置.png]]
Transwarp Data Hub中每个服务都可以设置该服务在集群中的服务名，用于在集群中指代该服务，这里显示的是Leopard服务的编辑页面。

如果不设置，默认服务名为“服务＋整数”，这是因为在集群计算资源允许的情况下，一些服务可以在集群中有多个实例，这些实例工作时需要通过服务名互相区分（如Leopard1和Leopard2）。在第一次安装集群时，每个服务都只能安装一个实例，额外的服务实例可以向安装好的集群添加。
## 2.0.5.服务的配置
服务的配置非常重要，请您务必在这一步仔细检查每一项服务的配置。在“配置服务”下，您可以为所有的服务进行配置。

**基础参数：**
![[15.基础参数.png]]
这里显示的是Leopard服务的基础参数配置页。如果没有特殊要求，您可以直接使用Transwarp Manager对基础参数提供的默认值。基础参数值不仅在这一步可以设置，安装完成后还可以在服务配置页面进行修改。

基础参数分为节点特定参数（例如上图中的 leopard.localdir）和非节点特定参数（例如上图中的 leopard.worker.cores 和 leopard.worker.memory）。
- 对于非节点特定参数，直接点击右侧的编辑便可以进行修改，然后点击节点对应的值进行修改。![[16.修复特定节点.png]]
- 对于节点特定参数，点击**展开详情**查看具体的配置信息：![[17.展开详情.png]]
- 如需修改多个节点中的参数配置，可单击编辑，在弹出的对话框中选择全部节点或标签筛选节点，标签可在节点页面管理。![[18.修改多个节点配置.png]]

**自定义参数：**
所有服务都可以添加自定义参数。这里显示的是Leopard服务的自定义参数配置页。
![[19.自定义参数.png]]
## 2.0.6.服务的安装
配置好参数后，点击“下一步”，在出现的如下所示窗口中可以看到配置信息总览，如果需要修改，可点击“上一步”返回修改。![[20.服务的安装.png]]
确认配置信息后，点击 **下一步** 准备执行安装。

此时，Transwarp Manager会弹出一个“安装确认”窗口确认开始安装。点击“确认”继续。
![[21.安装确认.png]]
安装开始，系统将花费一些时间安装您所选中的服务，请耐心等待。![[22.安装开始.png]]
![[23.安装完成.png]]
安装完成后，点击“完成”进入Transwarp Manager的控制面板。
![[24.进入控制面板.png]]
## 2.0.7.安装Python客户端
服务安装完成后，用户必须安装Python客户端，才可以使用Python代码调用分布式 DataFrame 服务，安装过程如下。
1. 获取安装包。假设获取的whl包名字为`timelyre_api-1.1.0.dev20240228155946+e5d0456-py3-none-any.whl`
2. 执行pip命令安装
```bash
python3 -m pip install timelyre_api-1.1.0.dev20240228155946+e5d0456-py3-none-any.whl 
```
3. 新建test.py文件，添加如下内容
```python
import numpy as np
import transwarp_df.pandas as ps
from transwarp.timelyre.timelyre_public import DatabaseConn
conn = get_conn()
s = ps.Series([1, 3, 5, np.nan, 6, 8])
print(s)
```
其中conn为使用文档1.1DatabaseConn中描述的方式建立的数据库连接。
4. 使用python3 test.py执行测试文件。成功安装情况下会输出如下内容：
```
0    1.0
1    3.0
2    5.0
3    NaN
4    6.0
5    8.0
dtype: float64
```

## 相关链接
- [[如何将markdown文件转换为adoc文件]]